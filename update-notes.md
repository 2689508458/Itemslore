# ItemsLore 插件更新公告 - v1.2.0

尊敬的服务器管理员和玩家们：

我们很高兴地宣布 ItemsLore 插件已更新至 v1.2.0 版本！此次更新主要优化了唯一性Lore和固定Lore的处理逻辑，使物品描述更加个性化和可控。

## 🔥 主要更新内容

### 1. 唯一性 Lore 分类识别

改进了唯一性Lore的识别逻辑，现在可以同时拥有多个不同类型的唯一性Lore，例如：
- 一个武器可以同时拥有"命运"和"灵魂"两种不同类型的唯一特性
- 但相同类型的唯一特性（如两个"命运"）不会同时出现

### 2. 数量控制开关

新增两个配置选项，用于控制固定Lore和唯一Lore是否计入随机Lore数量限制：

```yaml
random-lore:
  # 固定Lore是否计入随机Lore数量
  fixed-count-as-random: false
  # 唯一Lore是否计入随机Lore数量
  unique-count-as-random: true
```

**效果说明：**
- 当`fixed-count-as-random: false`（默认）时，固定Lore不占用随机Lore名额
- 当`unique-count-as-random: false`时，唯一性Lore不占用随机Lore名额

### 3. 调试功能增强

添加了更详细的调试日志功能，方便服务器管理员排查Lore生成过程中的问题。

```yaml
# 在配置文件中启用调试模式
debug: true
```

### 4. 代码优化

- 优化了随机Lore的生成算法，提高了执行效率
- 解决了部分情况下唯一性Lore识别错误的问题
- 改进了Lore类型判断逻辑，使物品描述更加精准

## 🔰 如何更新

1. 下载最新版本的 ItemsLore.jar 文件
2. 替换服务器 plugins 文件夹中的旧版本
3. 重启服务器或使用插件管理器重载插件
4. 配置文件会自动更新，但建议备份后手动合并，以保留您的自定义设置

---

# ItemsLore 插件更新公告 - v1.1.0

尊敬的服务器管理员和玩家们：

我们很高兴地宣布 ItemsLore 插件正式更新至 v1.1.0 版本！此次更新带来了多项新功能和改进，让您的物品信息展示更加丰富多彩。

## 🔥 主要更新内容

### 1. 唯一性 Lore 系统

现在您可以设置唯一性的 Lore 内容，确保同一类型的特性在物品上不会重复出现。这使得每件物品都能拥有更加独特的描述组合。

**如何配置唯一性 Lore:**
- 方法 1: 添加 "UNIQUE:" 前缀
  ```yaml
  - ["UNIQUE:&8⚔ &c命运:&r &f在%ilore_player%得到它的那一刻，命运之轮开始转动", 0.2]
  ```

- 方法 2: 使用布尔值标记
  ```yaml
  - ["&8⚔ &c命运:&r &f在%ilore_player%得到它的那一刻，命运之轮开始转动", 0.2, true]
  ```

### 2. 固定 Lore 支持

新增固定 Lore 功能，这些 Lore 总是会出现，不受随机概率和数量限制的影响，非常适合添加物品类型标签或重要信息。

**如何配置固定 Lore:**
- 方法 1: 添加 "FIXED:" 前缀
  ```yaml
  - ["FIXED:&8⚔ &c武器类型:&r &f近战武器", 1.0]
  ```

- 方法 2: 使用第四个布尔值参数
  ```yaml
  - ["&8⚔ &c武器类型:&r &f近战武器", 1.0, false, true]
  ```

### 3. 变量支持增强

现在您可以在随机 Lore 中使用各种变量：
- `%ilore_player%` - 获取物品的玩家名称
- `%ilore_time%` - 获取物品的时间
- `%material_name%` - 物品材质名称

所有这些变量在生成 Lore 时都会被自动替换为实际值。

**变量使用示例:**
```yaml
- ["&8✧ &e传说:&r &f这件物品在%ilore_player%手中逐渐展现其力量", 0.2]
```

### 4. 权重系统优化

我们重新设计了权重系统，使用 0.1-1.0 的范围表示权重，这样更加直观：
- `0.1` 表示 10% 的概率
- `0.5` 表示 50% 的概率
- `1.0` 表示 100% 的概率

这与旧系统的 1-100 权重相比更加清晰。插件会自动将旧系统的权重转换为新系统，兼容现有配置。

**权重设置示例:**
```yaml
# 具有不同权重的多个选项
- ["&8⚔ &c锋利:&r &f锋利无比，可轻易切断钢铁", 0.5]  # 50% 概率
- ["&8⚔ &c杀伤:&r &f曾经斩杀过无数强敌", 0.3]       # 30% 概率
- ["&8⚔ &c威力:&r &f挥舞时发出刺耳的破空声", 0.4]    # 40% 概率
- ["&8⚔ &c传说:&r &f据说是远古勇者的佩剑", 0.1]      # 10% 概率
```

### 5. 物品类型精准匹配

现在随机 Lore 会根据物品类型自动选择合适的 Lore 池：
- 检测物品是否属于 WEAPON、TOOL、ARMOR 等类别
- 对钻石、下界合金等特殊材质的物品有专属描述
- 同时考虑通用 (ALL) 池和专属池，确保 Lore 内容丰富多样

### 6. 概率系统改进

彻底重写了概率系统，解决了随机性和数量控制的问题：
- 确保生成符合设定最小数量的随机 Lore
- 分离固定 Lore 和随机 Lore 的处理逻辑
- 更合理的随机选择算法，权重高的 Lore 有更大概率被选中
- 多次尝试机制确保能够生成足够数量的 Lore

### 7. 整体可靠性提升

- 修复了命令添加 Lore 时可能出现的空 Lore 问题
- 优化了对特殊物品材质的识别
- 改进了唯一性 Lore 的类型检测逻辑
- 增强了对各种配置错误的容错处理

## 🔰 如何更新

1. 下载最新版本的 ItemsLore.jar 文件
2. 替换服务器 plugins 文件夹中的旧版本
3. 重启服务器或使用插件管理器重载插件
4. 配置文件会自动更新，但建议备份后手动合并，以保留您的自定义设置

## 🌟 使用示例

配置一个带有固定和随机特性的下界合金剑：

```yaml
random-lore:
  pools:
    NETHERITE:
      - ["FIXED:&8🔥 &d材质类型:&r &f下界合金制品", 1.0, false, true]
      - ["&8🔥 &d炽热:&r &f触碰时能感受到来自下界的温度", 0.3]
      - ["&8🔥 &d坚不可摧:&r &f几乎不会被任何力量摧毁", 0.5]
      - ["&8🔥 &d古老:&r &f蕴含着远古下界的力量", 0.2]
      - ["UNIQUE:&8🔥 &d灵魂:&r &f隐约间能听到下界灵魂的低语", 0.1]
    WEAPON:
      - ["FIXED:&8⚔ &c武器类型:&r &f近战武器", 1.0, false, true]
      - ["&8⚔ &c锋利:&r &f锋利无比，可轻易切断钢铁", 0.5]
      - ["&8⚔ &c命运:&r &f在%ilore_player%得到它的那一刻，命运之轮开始转动", 0.2]
```

结果示例：
```
⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤

⚔ 武器属性
❖ 耐久: 2031/2031

[ 随机武器特性 ]
🔥 材质类型: 下界合金制品
⚔ 武器类型: 近战武器
🔥 坚不可摧: 几乎不会被任何力量摧毁
⚔ 锋利: 锋利无比，可轻易切断钢铁
🔥 炽热: 触碰时能感受到来自下界的温度

· · · · · · · · · · · · · · · · · · · ·

◈ 获取时间: 2025-05-20 20:06
✦ 获取者: xiaoyue
✧ 来源: 模板应用

⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤⏤
```

## 📋 后续计划

我们计划在未来版本中添加更多精彩功能：
- 支持条件随机Lore（基于玩家等级、成就等）
- 物品故事生成系统，使物品随使用时间变化
- 更多物品交互功能和事件支持

感谢您一直以来对 ItemsLore 插件的支持！如有任何问题或建议，欢迎联系我们。

祝您游戏愉快！

---
ItemsLore 开发团队 